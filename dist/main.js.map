{"version":3,"file":"main.js","sourceRoot":"","sources":["../src/main.ts"],"names":[],"mappings":"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","sourcesContent":["// 🎯 Imports corretos da arquitetura hexagonal (src/)\nimport ShoppingCart from './domain/entities/ShoppingCart.js';\nimport CartItem from './domain/value-objects/CartItem.js';\nimport Money from './domain/value-objects/Money.js';\nimport DependencyInjection from './infrastructure/config/DependencyInjection.js';\nimport CartCLI from './infrastructure/adapters/inbound/cli/CartCLI.js';\n\n// 🎯 Implementação correta dos adapters de desconto\nclass NoDiscountAdapter {\n    calculateDiscount(total: number) {\n        return 0; // Sem desconto\n    }\n}\n\nclass TenPercentDiscountAdapter {\n    calculateDiscount(total: number) {\n        return total * 0.10; // 10% do total\n    }\n}\n\nclass TwentyPercentDiscountAdapter {\n    calculateDiscount(total: number) {\n        return total * 0.20; // 20% do total\n    }\n}\n\n// 🎯 Capturar argumentos da linha de comando\nconst args = process.argv.slice(2);\n\n// 📋 Função para processar argumentos\nfunction parseArguments(args: string[]) {\n    const config = {\n        items: [] as number[],\n        discount: 'none'\n    };\n    \n    for (let i = 0; i < args.length; i++) {\n        const arg = args[i];\n        \n        // Suporte para --items 200,150,75,25\n        if (arg === '--items' && args[i + 1]) {\n            const itemsString = args[i + 1];\n            const prices = itemsString.split(',').map(price => parseFloat(price.trim()));\n            config.items = prices.filter(price => !isNaN(price) && price > 0);\n            i++; // Pular próximo argumento\n        }\n        \n        // Suporte para --item 100 (individual)\n        if (arg === '--item' && args[i + 1]) {\n            const price = parseFloat(args[i + 1]);\n            if (!isNaN(price) && price > 0) {\n                config.items.push(price);\n            }\n            i++;\n        }\n        \n        // Suporte para --discount 10\n        if (arg === '--discount' && args[i + 1]) {\n            config.discount = args[i + 1];\n            i++;\n        }\n    }\n    \n    return config;\n}\n\n// 🚡 Função para criar estratégia de desconto\nfunction createDiscountStrategy(discountType: string) {\n    switch (discountType.toLowerCase()) {\n        case '10':\n        case 'ten':\n            return new TenPercentDiscountAdapter();\n        case '20':\n        case 'twenty':\n            return new TwentyPercentDiscountAdapter();\n        case 'none':\n        case 'no':\n        default:\n            return new NoDiscountAdapter();\n    }\n}\n\n// 🚀 Função principal\nfunction main() {\n    console.log('🎪 Shopping Cart - Hexagonal Architecture Demo\\n');\n    \n    // Se não há argumentos, mostrar exemplos padrão\n    if (args.length === 0) {\n        console.log('📋 Executando exemplos padrão...\\n');\n        runDefaultExamples();\n        return;\n    }\n    \n    // Processar argumentos\n    const config = parseArguments(args);\n    \n    if (config.items.length === 0) {\n        console.log('❌ Nenhum item válido fornecido!');\n        showUsage();\n        return;\n    }\n    \n    // Criar carrinho com estratégia\n    const discountStrategy = createDiscountStrategy(config.discount);\n    const cart = new ShoppingCart(`cart-${Date.now()}`); // Adding a dynamic ID\n    \n    // Adicionar itens\n    console.log('➕ Adicionando itens:');\n    let subtotal = 0;\n    config.items.forEach((price, index) => {\n        // Criar CartItem com Money object\n        const money = new Money(price, 'BRL');\n        const item = new CartItem(`Item ${index + 1}`, money, 1);\n        cart.addItem(item);\n        subtotal += price;\n        console.log(`   ${item.name}: R$ ${price.toFixed(2)}`);\n    });\n    \n    // Calcular desconto manualmente para mostrar detalhes\n    const discountAmount = discountStrategy.calculateDiscount(subtotal);\n    const total = subtotal - discountAmount;\n    \n    console.log(`\\n📊 Cálculo detalhado:`);\n    console.log(`   Subtotal: R$ ${subtotal.toFixed(2)}`);\n    console.log(`   Desconto (${config.discount}): -R$ ${discountAmount.toFixed(2)}`);\n    console.log(`\\n🎯 Desconto aplicado: ${config.discount}`);\n    console.log(`✅ Total Final: R$ ${total.toFixed(2)}`);\n}\n\n// 📚 Exemplos padrão (quando não há parâmetros)\nfunction runDefaultExamples() {\n    console.log('🧮 Teste de Cálculos de Desconto:\\n');\n    \n    // Exemplo específico: 150 com 20% desconto\n    console.log('🎯 Exemplo: R$ 150 com 20% desconto');\n    const discountStrategy20 = new TwentyPercentDiscountAdapter();\n    const discount20 = discountStrategy20.calculateDiscount(150);\n    const total20 = 150 - discount20;\n    console.log(`   Subtotal: R$ 150.00`);\n    console.log(`   Desconto (20%): -R$ ${discount20.toFixed(2)}`);\n    console.log(`   Total: R$ ${total20.toFixed(2)}`);\n    \n    // Exemplo 1: 10% de desconto\n    console.log('\\n🎯 Exemplo 1 - Desconto 10%:');\n    const cart1 = new ShoppingCart('cart-1');\n    const item1 = new CartItem(\"Produto A\", new Money(100, 'BRL'), 1);\n    const item2 = new CartItem(\"Produto B\", new Money(50, 'BRL'), 1);\n    cart1.addItem(item1);\n    cart1.addItem(item2);\n    \n    const subtotal1 = 150;\n    const discount1 = new TenPercentDiscountAdapter().calculateDiscount(subtotal1);\n    console.log(`   ${item1.name}: R$ 100, ${item2.name}: R$ 50`);\n    console.log(`   Subtotal: R$ ${subtotal1.toFixed(2)}`);\n    console.log(`   Desconto (10%): -R$ ${discount1.toFixed(2)}`);\n    console.log(`   Total: R$ ${(subtotal1 - discount1).toFixed(2)}`);\n    \n    // Exemplo 2: 20% de desconto\n    console.log('\\n🎯 Exemplo 2 - Desconto 20%:');\n    const cart2 = new ShoppingCart('cart-2');\n    const item3 = new CartItem(\"Produto C\", new Money(200, 'BRL'), 1);\n    cart2.addItem(item3);\n    \n    const subtotal2 = 200;\n    const discount2 = new TwentyPercentDiscountAdapter().calculateDiscount(subtotal2);\n    console.log(`   ${item3.name}: R$ 200`);\n    console.log(`   Subtotal: R$ ${subtotal2.toFixed(2)}`);\n    console.log(`   Desconto (20%): -R$ ${discount2.toFixed(2)}`);\n    console.log(`   Total: R$ ${(subtotal2 - discount2).toFixed(2)}`);\n    \n    console.log('\\n📋 Para usar com parâmetros:');\n    showUsage();\n}\n\n// 📋 Mostrar instruções de uso\nfunction showUsage() {\n    console.log(`\n🎮 Uso:\n  node dist/main.js --items 150 --discount 20\n  node dist/main.js --items 200,150,75,25 --discount 10\n  node dist/main.js --item 100 --item 50 --discount 20\n  node dist/main.js --items 80,120 --discount none\n\n🎯 Parâmetros:\n  --items <lista>    Lista de preços separados por vírgula\n  --item <preço>     Adicionar item individual (pode repetir)\n  --discount <tipo>  Tipo de desconto: none, 10, 20\n\n💡 Exemplos de cálculo:\n  R$ 150 - 20% = R$ 120 (150 - 30)\n  R$ 100 - 10% = R$ 90  (100 - 10)\n    `);\n}\n\n// Executar aplicação\nmain();"]}